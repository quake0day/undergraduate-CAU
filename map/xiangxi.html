<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>测控061全体成员 陈思制作！</title>
    <script src="custom.api3.js" type="text/javascript"></script>
    <link href="main.css" rel="stylesheet" type="text/css" />
    <script src="http://ditu.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAXw2b1WnVQgvwM2Ujd_xaxBREIN3WZonzZIBjQyv-jlSYTU3DEhR1BjBa0isUAvLpiYYQKV92jucpzA"
      type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[
    function load()
    {
      if (GBrowserIsCompatible())
      {
        var map = new GMap2(document.getElementById("map"));
        G_HYBRID_MAP.getTileLayers()[0].getOpacity = function () {return 1;};
        G_HYBRID_MAP.getTileLayers()[1].getOpacity = function () {return 0.5;};
        map.setCenter(new GLatLng(36.94,106.08),4);
		map.addControl(new GLargeMapControl(),new GControlPosition(G_ANCHOR_BOTTOM_RIGHT, new GSize(40,200)));
		map.addControl(new GMapTypeControl(),new GControlPosition(G_ANCHOR_TOP_RIGHT, new GSize(40,20)));
		map.enableDoubleClickZoom();
		map.enableScrollWheelZoom();
		//点击地图显示经纬度的模块1
		GEvent.addListener(map, 'click', function(overlay, point) {			    
		var latLngStr = '经度：' + point.x + '<br/>纬度：' + point.y + '';
		map.openInfoWindowHtml(point, latLngStr);
			});		
	//模块1结束

// 下载在12.data.xml之中的数据并加载到地图的模块2
// XML的格式大致是这样的：
// <markers>
//   <marker name="XXX" lat="39.98629852076348" lng="116.3574438359872" img="在/img文件夹下的文件名 不用加后缀(后缀名必须为img)" describe="  "/>
//   <marker lat="29.94176113301537" lng="112.6857368551186"/>
// </markers>
		GDownloadUrl("12.data.xml", function(data, responseCode) {
  		var xml = GXml.parse(data);
  		var markers = xml.documentElement.getElementsByTagName("marker");
  		for (var i = 0; i < markers.length; i++) {
    	var point = new GLatLng(parseFloat(markers[i].getAttribute("lat")),
                            parseFloat(markers[i].getAttribute("lng")));
		name = markers[i].getAttribute("name");
		describe = markers[i].getAttribute("describe");
		img = markers[i].getAttribute("img");
    	map.addOverlay(new GMarker(point));
		map.addOverlay(createMarker(point,name,describe,img));
   																 }
													});
      }
    }
	
		function createMarker(point,name,describe,img) {
 			var marker = new GMarker(point);
  			GEvent.addListener(marker, "click", function() {
    		marker.openInfoWindowHtml("<img src='img/"+img+".jpg'  /><div id='test'><b>" + name +" <br />个人介绍："+describe+"</div></b>");
  												});
 			 return marker;
											}
		//预读取图片 在ONLOAD里面加入要预载入的图片									
		function MM_preloadImages() { //v3.0
  		var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
   	 	var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    	if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}
    //]]>
    </script>
    <style type="text/css">
<!--
.STYLE2 {color: #990000}
.STYLE3 {color: #FF0000}
-->
    </style>
</head>
<body onload="load();MM_preloadImages('img/bb.jpg','img/2.jpg','img/cmx.jpg','img/cs.jpg','img/dly.jpg','img/dx.jpg','img/dxm.jpg','img/fyr2.jpg','img/jindan.jpg','img/jrt.jpg','img/kff.jpg','img/koko.jpg','img/lg.jpg','img/lh.jpg','img/liuying.jpg','img/lx.jpg','img/lyj.jpg','img/rd2.jpg','img/rlx.jpg','img/wfj.jpg','img/ww.jpg','img/wxt.jpg','img/wyf.jpg','img/xb.jpg','img/xingxing.jpg','img/xq.jpg','img/yg.jpg','img/yjl.jpg','img/zdy.jpg','img/kzy1.jpg')" onunload="GUnload()">
    <div id="map" style="width:58%; height: 600px;"></div>
    <div id="message">
    <h2>测控061同学的住址    </h2>
	<h3>关于这个地图的访问速度</h3>
	<p>学校的网速比较慢，为了适应这种恶劣的网速，我提供了两个版本的地图。现在你访问的是完全版。如果你觉得这个速度实在是令你难以忍受，你可以访问<a href="index.html">高速版</a>的地图:)</p>
    <h3>介绍</h3>
    <p>你想知道大家都住在哪里吗？ 那么这个小小的地图也许会帮上一点忙！ 大家可以很轻松的查找到各位同学的所在地~</p>
    <p>新功能简介：这次大家可以提供自己住所精确的经纬度给我了！ 只需要在地图上轻轻单击，就可以显示出精确的经纬度！<br />
      如果你很支持这个项目，那么请提供给我你家精确的经纬度。</p>
    <h3>个性化与纠错</h3>
    <p> 如果发现地图位置标识错误 或者你想提供更加精确的经纬度以及添加更加个性的自我介绍又或是想添加更漂亮更有个性的照片 请联系我 <a href="mailto:quake@vip.qq.com" target="_blank">quake@vip.qq.com
    <br />
</a></p>
<h3>关于ckmap</h3>
<p>版本 <span class="STYLE2">beta 3.1</span> <span class="STYLE2">停止开发</span><br />
  这是一个Open Sources的项目 你如果也想加入到开发者的行列中 请访问<a href="http://code.google.com/p/ckmap/" target="_blank">http://code.google.com/p/ckmap/</a><br />
  使用时请保留版权信息 谢谢！</p>
</div>
<!--制作人 陈思 来自中国农业大学-->
  </body>
</html>
